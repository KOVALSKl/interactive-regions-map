<script setup>
<<<<<<< HEAD
=======
    import * as d3 from "d3"
    import {ref, computed, toRaw} from "vue"

    import mapJson from "./assets/map.json"
    import indexedMapFeaturesJson from "./assets/indexed_map.json"

>>>>>>> 7b7f7887ed2b53d1787237e167e64a4882f4eb56
    import RegionsMap from "@/components/RegionsMap/RegionsMap.vue";
    import RegionInfo from "@/components/Cards/RegionInfo/RegionInfo.vue"

    const width = 900
    const height = 900
<<<<<<< HEAD
=======
    const mapData = computed(() => mapJson)
    const mapDataFeaturesLength = mapData.value.features.length
    const indexedMapFeatures = computed(() => indexedMapFeaturesJson)

    const currentRegionIndex = ref(0)


    const currentRegion = computed(() => {
      return mapData.value.features[currentRegionIndex.value]
    })


    function nextRegion() {
      currentRegionIndex.value += 1

      if (currentRegionIndex.value === mapDataFeaturesLength) {
        currentRegionIndex.value = 0
      }

      invokeRegionClick()
    }

    function previousRegion() {
      currentRegionIndex.value -= 1

      if (currentRegionIndex.value < 0) {
        currentRegionIndex.value = mapData.value.features.length - 1
      }

      invokeRegionClick()
    }

    function invokeRegionClick() {
      let regionId = currentRegion.value.properties.id
      let regionPathElement = document.getElementById(regionId).lastChild
        regionPathElement.dispatchEvent(new MouseEvent("click", undefined))
    }
>>>>>>> 7b7f7887ed2b53d1787237e167e64a4882f4eb56

</script>

<template>
    <regions-map
            :width="width"
            :height="height"
<<<<<<< HEAD
    >
        <template #default="props">
            <region-info
                    v-bind="props"
=======
            :current-region-index="currentRegionIndex"
    >
        <template #region-data-description>
            <region-info
                    :region-data="currentRegion"
                    :on-next="nextRegion"
                    :on-previous="previousRegion"
>>>>>>> 7b7f7887ed2b53d1787237e167e64a4882f4eb56
            >
            </region-info>
        </template>
    </regions-map>
</template>